//WSBGINV  JOB ,GOLOB,MSGCLASS=X,NOTIFY=WSBG,CLASS=S
//STEP1    EXEC SAS
//CCIN1    DD  DISP=SHR,DSN=WSBG.WVOL.SOURCE(FMIDIN)
//CCIN2    DD  DISP=SHR,DSN=WSBG.WVOL.SOURCE(INVLLDUP)
//SASPCH   DD  UNIT=VIO,SPACE=(CYL,(1,1,)),
//             DCB=(LRECL=80,BLKSIZE=6160,RECFM=FB,DSORG=PS)
//SASLIB   DD  DISP=OLD,DSN=WSBG.WVOL.FMTLIB
OPTIONS SYMBOLGEN MLOGIC SOURCE SOURCE2 MPRINT;
DATA CONTROL;
  FILE SASPCH;
  INFILE CCIN1 MISSOVER;
  INPUT LIB $2. @;
  IF LIB = '/*' THEN DO;
    PUT /*@5 'OTHER' ' = ' " 'OTHER'    ;" / /**/ 'RUN;';
    STOP;
    END;
  IF LIB = '0' THEN DO;
    PUT 'PROC FORMAT LIBRARY=SASLIB;';
    PUT '  VALUE $FMID(DEFAULT=33)'; /*(DEFAULT=44) 6.07*/
    RETURN;
    END;
  INPUT @3 FMID $7. @11 DESC $CHAR33.;
    PUT @5 ' '''FMID $7. ' ''' ' = ' ' ''' DESC $CHAR33.''' ';
RUN;

%INC SASPCH;

PROC FORMAT FMTLIB LIBRARY=SASLIB.FORMATS;
  SELECT $FMID;

DATA CONTROL;
  FILE SASPCH;
  INFILE CCIN2 MISSOVER;
  LENGTH DSN1 DSN2 $70;
  IF _N_ EQ 1 THEN DO;
    PUT 'PROC FORMAT LIBRARY=SASLIB;';
    PUT '  VALUE $LLDP(DEFAULT=1)';
    END;
  INPUT @1 LIB1 $40. @41 LIB2 $40.;
  IF LIB1 = '/*' THEN DO;
    PUT   @5 'OTHER' ' = ' " ' '    ;" / /**/ 'RUN;';
    STOP;
    RETURN;
    END;
  DSN1 = TRIM(LIB1)||TRIM(LIB2);
  DSN2 = TRIM(LIB2)||TRIM(LIB1);
  PUT @1 "'" DSN1 $70. "'" "='D'";
  PUT @1 "'" DSN2 $70. "'" "='D'";
RUN;

%INC SASPCH;

PROC FORMAT FMTLIB LIBRARY=SASLIB.FORMATS;
  SELECT $LLDP;
